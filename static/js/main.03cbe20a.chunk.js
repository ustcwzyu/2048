(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),o=n(8),s=n(13),l=n(1),u=n(2),d=n(4),m=n(3),h=n(5),f=(n(19),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.score!==e.score||this.props.children!==e.children}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.score,a=e.children;return r.a.createElement("div",{className:"scorebox"},r.a.createElement("div",{className:"scorelabel"},t),r.a.createElement("div",{className:"score"},n),a)}}]),t}(a.Component)),v=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.score,n=e.bestScore,a=e.additionScores,r=this.props;return r.score!==t||r.bestScore!==n||r.additionScores!==a}},{key:"render",value:function(){var e=this.props;return r.a.createElement("div",{className:"scoreBoard"},r.a.createElement("h1",{className:"title"},"2048"),r.a.createElement(f,{score:e.score,label:"Score"},e.additionScores.map(function(t,n){return r.a.createElement("div",{className:"additionScore",key:t.key,onAnimationEnd:function(a){return e.onAdditionScoreAnimationEnd(a,t,n)}},"+",t.score)})),r.a.createElement(f,{score:e.bestScore,label:"Best"}),r.a.createElement("div",{className:"text"},r.a.createElement("span",{className:"bold"},"Move and Get the Highest Score")),r.a.createElement("button",{className:"newGame",onClick:e.onNewGame},"Restart"))}}]),t}(a.Component),b=n(7),p=(n(21),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.cell,a=t.col,i=t.row,c=(e={tile:!0},Object(b.a)(e,"tile-".concat(n.number),!0),Object(b.a)(e,"tile-new",n.newGenerated),Object(b.a)(e,"tile-merged",!!n.newMerged),e),o=Object.keys(c).filter(function(e){return!!c[e]}).join(" "),s=110*i+"px",l={transform:"translate3d(".concat(110*a+"px",", ").concat(s,", 0)")};return r.a.createElement("div",{className:o,style:l},r.a.createElement("div",{className:"tile-inner"},n.number))}}]),t}(a.Component)),w=(n(23),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"getTiles",value:function(){return this.props.cells.reduce(function(e,t,n){return t.reduce(function(e,t,a){return t&&(e.push({cell:t,row:n,col:a}),t.mergediTem&&e.push({cell:t.mergediTem,row:n,col:a})),e},e)},[]).sort(function(e,t){return e.cell.uuid-t.cell.uuid}).map(function(e){return r.a.createElement(p,{key:"tile"+e.cell.uuid,cell:e.cell,col:e.col,row:e.row})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"tileContainer"},this.getTiles())}}]),t}(a.Component)),y=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.nextSize;return this.props.size!==t}},{key:"getGrids",value:function(){var e=this.props.size;return new Array(e).fill().map(function(t,n){return function(t){return new Array(e).fill().map(function(n,a){return r.a.createElement("div",{className:"gridCell",key:"gridCell".concat(t*e+a)})})}(n)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"gridContainer"},this.getGrids())}}]),t}(a.Component);function g(e){return r.a.createElement("div",{className:"gameBoard"},r.a.createElement(v,e),r.a.createElement("div",{className:"gameBox"},r.a.createElement(y,{size:e.size}),r.a.createElement(w,{cells:e.cells}),e.children))}n(25);function O(e){var t=e.onNewGame;return r.a.createElement("div",{className:"gameOver"},r.a.createElement("h1",{className:"title"},"Game Over!"),r.a.createElement("button",{onClick:t},"Restart?"))}var S=n(12),j=n.n(S),E={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},k=0,N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state=n.getInitialState(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.newTile(),this.newTile(),this.handleKeyPress=this.handleKeyPress.bind(this),window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillMount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleKeyPress",value:function(e){var t=e.key;if(this.state.gameStarted){var n=t.toLowerCase().match(/arrow(up|right|down|left)/);n&&(this.move(n[1]),e.preventDefault())}}},{key:"getInitialState",value:function(){for(var e=this.props.size||4,t=[],n=0;n<e;n++)for(var a=t[n]=[],r=0;r<e;r++)a[r]=null;return{size:e,cells:t,gameStarted:!0,additionScores:[],score:0,bestScore:+localStorage.getItem("bestScore")}}},{key:"eachCell",value:function(e,t){return e.cells.forEach(function(e,n){return e.forEach(function(e,a){return t(e,n,a)})})}},{key:"newTile",value:function(){var e=this;this.setState(function(t){var n=e.state.cells,a=[];if(e.eachCell(t,function(e,t,n){e?e.mergedItem&&(e.number+=e.mergedItem.number,e.newMerged=!0):a.push([t,n])}),a.length){var r=Math.floor(Math.random()*a.length),i=Object(s.a)(a[r],2),c=i[0],o=i[1];n[c][o]={number:Math.random()>.9?4:2,newGenerated:!0,newMerged:!0,mergedItem:null,uuid:k++}}return{cells:n}})}},{key:"isMovable",value:function(){var e=!1,t=this.state.cells,n=this.state.size;return this.eachCell(this.state,function(a,r,i){if(!e)if(a){if(r<n-1){var c=t[r+1][i];if(c&&c.number===a.number)return void(e=!0)}if(i<n-1){var o=t[r][i+1];if(o&&o.number===a.number)return void(e=!0)}}else e=!0}),e}},{key:"sleep",value:function(e){return new j.a(function(t){setTimeout(t,e)})}},{key:"move",value:function(e){var t=this;if(!this.isMoving){for(var n=this.state.size,a=this.state.cells,r=E[e],i=!1,c=0,s=0;s<n;s++)for(var l=0;l<n;l++){var u=s,d=l;"right"===e&&(d=n-l-1),"down"===e&&(u=n-s-1);var m=a[u][d];if(m){m.newGenerated=!1,m.newMerged=!1,m.mergedItem=null;for(var h=d+r[0],f=u+r[1],v=void 0;h>=0&&h<n&&f>=0&&f<n&&!(v=a[f][h]);)h+=r[0],f+=r[1];v&&!v.mergedItem&&v.number===m.number?(m.mergedItem=v,a[f][h]=m,a[u][d]=null,i=!0,c+=v.number+m.number):(h-=r[0],f-=r[1],h===d&&f===u||(a[f][h]=m,a[u][d]=null,i=!0))}}i&&(this.isMoving=!0,this.setState(function(e){var t={cells:a,score:e.score+c};return c&&(t.additionScores=Object(o.a)(e.additionScores).concat([{score:c,key:"score"+Date.now()}])),t}),this.sleep(80).then(function(){t.newTile(),t.checkGameStatus(),t.isMoving=!1}))}}},{key:"checkGameStatus",value:function(){if(!this.isMovable()){var e=this.state.bestScore;e<this.state.score&&(e=this.state.score,localStorage.setItem("bestScore",e)),this.setState({gameStarted:!1,bestScore:e})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g,Object.assign({},this.state,{onAdditionScoreAnimationEnd:this.handleAdditionScoreAnimationEnd.bind(this),onNewGame:this.startNewGame.bind(this),onSwipe:this.move.bind(this)}),!this.state.gameStarted&&r.a.createElement(O,{onNewGame:this.startNewGame.bind(this)})))}},{key:"handleAdditionScoreAnimationEnd",value:function(e,t,n){this.setState(function(e){var t=e.additionScores;return{additionScores:Object(o.a)(t.slice(0,n)).concat(Object(o.a)(t.slice(n+1)))}})}},{key:"startNewGame",value:function(){var e=this;setTimeout(function(){k=0,e.setState(e.getInitialState()),e.newTile(),e.newTile()},0)}}]),t}(a.Component);n(35);c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,2,1]]]);
//# sourceMappingURL=main.03cbe20a.chunk.js.map